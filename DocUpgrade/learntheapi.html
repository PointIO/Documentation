<!DOCTYPE html>

<head>
	<meta charset="utf-8">
	<title>Point.io Tutorials and Documentation</title>
	
	<!--Imports the following CSS-->
	
	<!-- <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Droid+Sans:400,700"> -->
	<link rel="stylesheet" type="text/css" href="public/css/hightlight.default.css">
	<link rel="stylesheet" type="text/css" href="public/css/screen.css">
	<link rel="stylesheet" type="text/css" href="public/css/prettify.css">
	<link rel="stylesheet" type="text/css" href="public/css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="public/css/tutorials.css">
	<!-- <link rel="stylesheet" type="text/css" href="http://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css"> -->
	<link type="text/css" rel="stylesheet" href="http://fonts.googleapis.com/css?family=Ubuntu:300,300italic,regular,italic,500,500italic,700,700italic&subset=greek-ext" media="all">
	<link type="text/css" rel="stylesheet" href="http://fonts.googleapis.com/css?family=Open+Sans:300,regular,600,700&amp;subset=greek-ext" media="all">

	<!--Imports the following Javascript libraries-->	
	<script type="text/javascript" src="public/js/jquery-2.1.1.min.js"></script>
	<script type="text/javascript" src="public/js/jquery.slideto.min.js"></script>
	<script type="text/javascript" src="public/js/jquery.wiggle.min.js"></script>
	<script type="text/javascript" src="public/js/jquery.ba-bbq.min.js"></script>
	<script type="text/javascript" src="public/js/handlebars-1.0.0.js"></script>
	<script type="text/javascript" src="public/js/underscore-min.js"></script>
	<script type="text/javascript" src="public/js/backbone-min.js"></script>
	<script type="text/javascript" src="public/js/swagger.js"></script>
	<script type="text/javascript" src="public/js/swagger-ui.js"></script>
	<script type="text/javascript" src="public/js/highlight.7.3.pack.js"></script>
    <script type="text/javascript" src="public/js/prettify.js"></script>
	<script type="text/javascript" src="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
</head>

<body>
	<nav class="navbar navbar-default navbar-fixed-top">
	  <div class="container">
	   <img src="http://point.io/sites/all/themes/point-html5/logo.png" alt="" id="logo">
	   <!-- <div class="upper-buttons"> -->
		   <a id="docs" class="yousuck">Point.io API Documentation</a>
		   <a id="flowtutorial" class="yousuck">APIFlow Tutorial</a>
		   <a id="doctutorial" class="yousuck">APIDoc Tutorial</a>
		<!-- </div> -->
	  </div>
	</nav>
	<!-- Buttons to toggle between tutorials. -->
	<!-- <button id="doctutorial" class="upper-buttons">APIDoc Tutorial</button>
	<button id="flowtutorial" class="upper-buttons">APIFlow Tutorial</button>
	<button id="docs" class="upper-buttons">Point.io API Documentation</button> -->

	<!-- Swagger generated HTML goes in this div -->
	<div id="message-bar" class="swagger-ui-wrap">&nbsp;</div>
	<div id="swagger-container" class="swagger-ui-wrap" style="padding-top: 70px"></div>

	<!-- Modal to allow user to select sample code for certain APIFlow tutorial calls -->
	<div class="modal fade" id="openModal" tabindex="-1" role="dialog" aria-labelledby="largeModal" aria-hidden="true">
	  <div class="modal-dialog">
	    <div class="modal-content">
	      <div class="modal-header">
	        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
	        <h4 class="modal-title" id="myModalLabel">What Sample Body Would You Like To Use?</h4>
	      </div>
	      <div class="modal-body">
	        <form action="">
	  			<div id="modalbody"></div>
			</form>
	      </div>
	      <div class="modal-footer">
	        <button type="button" class="btn btn-primary" data-dismiss="modal">Copy Code</button>
	      </div>
	    </div>
	  </div>
	</div>

	<!-- Modal to display screenshots of Account Maintenance. Needed large modal for this. -->
	<div class="modal fade" id="openLgModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	  <div class="modal-dialog modal-lg">
	    <div class="modal-content">
	      <div class="modal-header">
	        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
	        <h4 class="modal-title" id="myModalLabel">Screenshot of Point.io Account Maintenance after call is made</h4>
	      </div>
	      <div class="modal-body-lg">
	 
	      </div>
	      <div class="modal-footer">
	        <button type="button" class="btn btn-primary-lg" data-dismiss="modal">Close</button>
	      </div>
	    </div>
	  </div>
	</div>



	


<script type="text/javascript">
		$(document).ready(function() {

			//------Start of APIdoc tutorial-----
			$("#doctutorial").click(function() {
			prettyPrint();

			window.swaggerUi = new SwaggerUi( {
			    discoveryUrl: "/docupgrade/APIdoc_tutorial/tutorials.json",
			    dom_id:"swagger-container",
			    supportHeaderParams: true,
			    supportedSubmitMethods: ['get', 'post', 'put'],
			    onComplete: function(swaggerApi, swaggerUi){
			    	checkCookie();
			    	

			    	// Adds a save sessionkey button to all /auth calls.
					function addOnClick() {

				      var authCalls = 
					      ["#CoreTutorialOne\\.json_Auth_post_0_content",
					      "#CoreTutorialTwo\\.json_Auth_post_0_content",
					      "#CoreTutorialThree\\.json_Auth_post_0_content",
					      "#CoreTutorialFour\\.json_Auth_post_0_content",
					      "#CoreTutorialFive\\.json_Auth_post_0_content"];
					    
					    var saveSession = $('<input class="cookie" type="submit" value="Save Session Key" onclick="getSessionId($(this))">');

					      $(authCalls).each(function(i) {
					        $(authCalls[i]).find('input.submit[name="commit"]').on("click", function(){
					        		if ($(authCalls[i]).has(saveSession.length)) {
					        			$(authCalls[i]).find('.response h4:contains("Response Body")').append(saveSession);
					        		}
					        })



					    })
				    }
					

					addOnClick();

			    	

			    	if(console) {
			            console.log("Loaded SwaggerUI")
			            $(".endpoints").addClass("col-md-6")
			            $('li[id^="resource_"]').addClass("row")

						$.ajaxSetup ({
						    // Disable caching of AJAX responses
						    cache: false
						});

						// Adds sample code for the first APIdoc tutorial.
						$("#resource_CoreTutorialOne\\.json").append('<div id="CoreTutorialOneCode" class="hide"></div>')
						$( "#CoreTutorialOneCode" ).load( "/docupgrade/APIdoc_tutorial/code1.html" );
						// Adds sample code for the second APIdoc tutorial.
						$("#resource_CoreTutorialTwo\\.json").append('<div id="CoreTutorialTwoCode" class="hide"></div>')
						$( "#CoreTutorialTwoCode" ).load( "/docupgrade/APIdoc_tutorial/code2.html" );	            
						// Adds sample code for the third APIdoc tutorial.
						$("#resource_CoreTutorialThree\\.json").append('<div id="CoreTutorialThreeCode" class="hide"></div>')
						$( "#CoreTutorialThreeCode" ).load( "/docupgrade/APIdoc_tutorial/code3.html" );	            
						// Adds sample code for the fourth APIdoc tutorial.
						$("#resource_CoreTutorialFour\\.json").append('<div id="CoreTutorialFourCode" class="hide"></div>')
						$( "#CoreTutorialFourCode" ).load( "/docupgrade/APIdoc_tutorial/code4.html" );	            
						// Adds sample code for the fifth APIdoc tutorial.
						$("#resource_CoreTutorialFive\\.json").append('<div id="CoreTutorialFiveCode" class="hide"></div>')
						$( "#CoreTutorialFiveCode" ).load( "/docupgrade/APIdoc_tutorial/code5.html" );	          



			        }
			      $('pre code').each(function(i, e) {hljs.highlightBlock(e)});
			    },
			    onFailure: function(data) {
			    	if(console) {
			            console.log("Unable to Load SwaggerUI");
			            console.log(data);
			        }
			    },
			    docExpansion: "none"
			});

			window.swaggerUi.load();	
		});
		//-----End of APIdoc tutorial-----//



		//-----Start of APIflow Tutorial-----//
		$("#flowtutorial").click(function() {
			prettyPrint();

			window.swaggerUi = new SwaggerUi({
			    discoveryUrl: "/docupgrade/APIflow_tutorial/APIFlow.json",
			    dom_id:"swagger-container",
			    supportHeaderParams: true,
			    supportedSubmitMethods: ['get', 'post', 'put'],
			    onComplete: function(swaggerApi, swaggerUi){
			    	checkCookie();

			    	// Adds Save SessionKey button to all auth calls.
			    	function addOnClick() {

				      var authCalls = 
					      ["#FlowTutorialOne\\.json_nickname_post_0_content",
					      "#FlowTutorialTwo\\.json_nickname_post_0_content",
					      "#FlowTutorialThree\\.json_nickname_post_0_content"];
					    

					      var saveSession = $('<input class="cookie" type="submit" value="Save Session Key" onclick="getSessionId($(this))">');

					      $(authCalls).each(function(i) {
					        $(authCalls[i]).find('input.submit[name="commit"]').on("click", function(){
					        	if ($(authCalls[i]).has(saveSession.length)) {
					        		$(authCalls[i]).find('.response h4:contains("Response Body")').append(saveSession);
					        	}
					        })

					    })
				    }
					
					addOnClick();


			    	if(console) {
			            console.log("Loaded SwaggerUI")
			            $(".endpoints").addClass("col-md-6")
			            $('li[id^="resource_"]').addClass("row")

						$.ajaxSetup ({
						    // Disable caching of AJAX responses
						    cache: false
						});

			            // Adds sample code for the first APIflow tutorial.
			            $("#resource_FlowTutorialOne\\.json").append('<div id="FlowTutorialOneCode" class="hide"></div>')
						$( "#FlowTutorialOneCode" ).load( "/docupgrade/APIflow_tutorial/flowcode1.html" );           

						// Adds sample code for the second APIflow tutorial.
						$("#resource_FlowTutorialTwo\\.json").append('<div id="FlowTutorialTwoCode" class="hide"></div>')
						$( "#FlowTutorialTwoCode" ).load( "/docupgrade/APIflow_tutorial/flowcode2.html" );	            

						// Adds sample code for the third APIflow tutorial.
						$("#resource_FlowTutorialThree\\.json").append('<div id="FlowTutorialThreeCode" class="hide"></div>')
						$( "#FlowTutorialThreeCode" ).load( "/docupgrade/APIflow_tutorial/flowcode3.html" );            

						// Adds button to fill body field with sample json.
						$("#FlowTutorialOne\\.json_nickname_post_2_content").find('textarea[name="body"]').parent().next().append('<button id="flowonepost2" data-toggle="modal" data-target="#openLgModal" style="margin-top: 10px">What it looks like in Account Maintenance</button>')

						// Adds screenshot to modal.
						$("#flowonepost2").on("click", function() {
							var screendiv = $('<div></div>')
							var screenshot = $('<img class="screenshot" src="/docupgrade/images/viewer2.png">');
							screendiv.append(screenshot);
							$(".modal-body-lg").append(screendiv);

							$(".btn-primary-lg").on("click", function() {
								screendiv.remove();
								screenshot.remove();
							})

						});


						$("#FlowTutorialOne\\.json_nickname_put_3_content").find('textarea[name="body"]').parent().next().append('<button id="flowoneput3" data-toggle="modal" data-target="#openModal" style="margin-top: 10px">Select a body</button')

						$("#flowoneput3").on("click", function() {
							$("#FlowTutorialOne\\.json_nickname_put_3_content").find('textarea[name="body"]').attr('id', 'flowonebody2');

								// Adds radio buttons dynamically to modal for this call.
								var approvalRadio = $('<input type="radio" name="options" value="approve">');
								var approvalText = $('<p style="display: inline"> Approve the reviewed document. </p>');
								var rejectRadio = $('<input type="radio" name="options" value="reject">');
								var rejectText = $('<p style="display: inline"> Reject the reviewed document. </p>');
								var modalbody = $('<div></div>');

								modalbody.append(approvalRadio, approvalText, '<br>', rejectRadio, rejectText);
								$(".modal-body").append(modalbody);

							// Adds corresponding JSON to body parameter.
							$(".btn-primary").on("click", function() {
								$("#flowonebody2").html("");
								if ($( "input:radio[name=options]:checked" ).val() == 'approve') {
									$('#flowonebody2').load("/docupgrade/APIflow_tutorial/FlowOnePut3a.json");
								} else if ($( "input:radio[name=options]:checked" ).val() == 'reject') {
									$('#flowonebody2').load("/docupgrade/APIFlow_tutorial/FlowOnePut3b.json");
								}

								modalbody.remove();
							})
						});


						$("#FlowTutorialTwo\\.json_nickname_post_1_content").find('textarea[name="body"]').parent().next().append('<button id="flowtwopost1" data-toggle="modal" data-target="#openLgModal" style="margin-top: 10px">What it looks like in Account Maintenance</button>')


						// Adds screenshot to modal.
						$("#flowtwopost1").on("click", function() {
							var screendiv = $('<div></div>')
							var screenshot = $('<img class="screenshot" src="/docupgrade/images/viewer2.png">');
							screendiv.append(screenshot);
							$(".modal-body-lg").append(screendiv);

							$(".btn-primary-lg").on("click", function() {
								screendiv.remove();
								screenshot.remove();
							})


						});

						$("#FlowTutorialTwo\\.json_nickname_put_2_content").find('textarea[name="body"]').parent().next().append('<button id="flowtwoput2" data-toggle="modal" data-target="#openModal" style="margin-top: 10px">Select a body</button>')


						$("#flowtwoput2").on("click", function() {
							$("#FlowTutorialTwo\\.json_nickname_put_2_content").find('textarea[name="body"]').attr('id', 'flowtwobody2');


						// Adds radio buttons dynamically to modal for this call.
								var approvalRadio = $('<input type="radio" name="options" value="approve">');
								var approvalText = $('<p style="display: inline"> Approve the reviewed document. </p>');
								var rejectRadio = $('<input type="radio" name="options" value="reject">');
								var rejectText = $('<p style="display: inline"> Reject the reviewed document. </p>');
								var modalbody = $('<div></div>');

								modalbody.append(approvalRadio, approvalText, '<br>', rejectRadio, rejectText);
								$(".modal-body").append(modalbody);

								// This loads the same JSON bodies as tasks/{taskId} as Flow Tutorial One because they use the same code.
							$(".btn-primary").on("click", function() {
								$("#flowtwobody2").html("");
								if ($( "input:radio[name=options]:checked" ).val() == 'approve') {
									$("#flowtwobody2").load("/docupgrade/APIflow_tutorial/FlowOnePut3a.json");
								} else if ($( "input:radio[name=options]:checked" ).val() == 'reject') {
									$('#flowtwobody2').load("/docupgrade/APIflow_tutorial/FlowOnePut3b.json");
								}

								modalbody.remove();
							})
						});


						$("#FlowTutorialThree\\.json_nickname_put_2_content").find('textarea[name="body"]').parent().next().append('<button id="flowthreeput2" data-toggle="modal" data-target="#openModal" style="margin-top: 10px">Select a body</button>')

						$("#flowthreeput2").on("click", function() {
							$("#FlowTutorialThree\\.json_nickname_put_2_content").find('textarea[name="body"]').attr('id', 'flowthreebody1');

								var approvalRadio = $('<input type="radio" name="options" value="approve">');
								var approvalText = $('<p style="display: inline"> Approve the reviewed document. </p>');
								var rejectRadio = $('<input type="radio" name="options" value="reject">');
								var rejectText = $('<p style="display: inline"> Reject the reviewed document. </p>');
								var modalbody = $('<div></div>');

								modalbody.append(approvalRadio, approvalText, '<br>', rejectRadio, rejectText);
								$(".modal-body").append(modalbody);

							$(".btn-primary").on("click", function() {
								$("#flowthreebody1").html("");
								if ($( "input:radio[name=options]:checked" ).val() == 'approve') {
									$('#flowthreebody1').load("/docupgrade/APIflow_tutorial/FlowOnePut3a.json");
								} else if ($( "input:radio[name=options]:checked" ).val() == 'reject') {
									$('#flowthreebody1').load("/docupgrade/APIflow_tutorial/FlowOnePut3b.json");
								}

								modalbody.remove();
							})
						});

						// Adds "approval" as the value of the name parameter of FlowTutorialOne /processes/{name}.
						$("#FlowTutorialOne\\.json_nickname_post_2_content").find('input.parameter.required[name="name"]').val("approval");

						// Adds sample JSON to FlowTutorialOne /processes/{name} body.
						$("#FlowTutorialOne\\.json_nickname_post_2_content").find('textarea[name="body"]').load("/docupgrade/APIflow_tutorial/FlowOnePost2.json");

						// Adds a task id to the taskId parameter of FlowTutorialOne /tasks/{task}
						$("#FlowTutorialOne\\.json_nickname_put_3_content").find('input.parameter.required[name="taskId"]').val("87247");

						// Adds the message name automatically to parameter in FlowTutorialTwo /messages/{messageName}
						$("#FlowTutorialTwo\\.json_nickname_post_1_content").find('input.parameter.required[name="messageName"]').val("documentApprovalMsg");

						// Adds sample JSON to FlowTutorialTwo /messages/{messagename} body.
						$("#FlowTutorialTwo\\.json_nickname_post_1_content").find('textarea[name="body"]').load("/docupgrade/APIflow_tutorial/flowtwopost1.json");

						// Adds a task id to the taskId parameter of FlowTutorialTwo /tasks/{task}
						$("#FlowTutorialTwo\\.json_nickname_put_2_content").find('input.parameter.required[name="taskId"]').val("87247");

						// Adds a task id to the taskId parameter of FlowTutorialThree /tasks/{task}
						$("#FlowTutorialThree\\.json_nickname_put_2_content").find('input.parameter.required[name="taskId"]').val("87247");


			        }
			      $('pre code').each(function(i, e) {hljs.highlightBlock(e)});
			    },
			    onFailure: function(data) {
			    	if(console) {
			            console.log("Unable to Load SwaggerUI");
			            console.log(data);
			        }
			    },
			    docExpansion: "none"
			});

			window.swaggerUi.load();
		});
		//-----End of APIflow tutorial-----//

		//-----Start of Documentation-----//
			$("#docs").click(function() {
			prettyPrint();

			window.swaggerUi = new SwaggerUi({
			    discoveryUrl: "/docupgrade/Documentation/spec0.json",
			    dom_id:"swagger-container",
			    supportHeaderParams: true,
			    supportedSubmitMethods: ['get', 'post', 'put'],
			    onComplete: function(swaggerApi, swaggerUi){
			    	checkCookie();

			    	// Adds Save SessionKey button to all auth calls.
			    	function addOnClick() {

				      var authCalls = 
					      ["#core\\.json_Auth_post_0_content",
					      "#hub\\.json_Auth_post_0_content"];
					    

					      var saveSession = $('<input class="cookie" type="submit" value="Save Session Key" onclick="getSessionId($(this))">');

					      $(authCalls).each(function(i) {
					        $(authCalls[i]).find('input.submit[name="commit"]').on("click", function(){
					        	if ($(authCalls[i]).has(saveSession.length)) {
					        		$(authCalls[i]).find('.response h4:contains("Response Body")').append(saveSession);
					        	}
					        })



					    })
				    }
					
					addOnClick();

			    	if(console) {
			            console.log("Loaded SwaggerUI")
			            // console.log(swaggerApi);
			            // console.log(swaggerUi);
			            $(".endpoints").addClass("col-md-6")
			            $('li[id^="resource_"]').addClass("row")

						$.ajaxSetup ({
						    // Disable caching of AJAX responses
						    cache: false
						});

			        }
			      $('pre code').each(function(i, e) {hljs.highlightBlock(e)});
			    },
			    onFailure: function(data) {
			    	if(console) {
			            console.log("Unable to Load SwaggerUI");
			            console.log(data);
			        }
			    },
			    docExpansion: "none"
			});

			window.swaggerUi.load();
		});
		//-----End of Documentation-----//

		

		// Sets APIdoc tutorial to be expanded on the page on first-load.
		$("#doctutorial").click();


	});
	//-----End of document.ready function-----//
	</script>


	<!--The following methods make saving the Session ID possible -->
	<script>

		function getSessionId() {
			//Is there a span of class "attribute" with text "SESSIONKEY"? If so, get the session key and create a cookie of it.
			for (i = 0; i < $("span.attribute").length; i++) { 
				if($("span.attribute")[i].textContent === "SESSIONKEY") {
					alert("The session key will now be pre-filled for you.");
					var sessionIdValue = $($("span.attribute")[i]).next().text().replace('"','');
					var betterSI = sessionIdValue.substr(0, sessionIdValue.length-1);
					console.log(betterSI);
					saveSession(betterSI);
					return;	
				}
			}
				// Else, alert the user their authentication failed and no session key could be saved.
				alert("Authentication failed, so no session key could be saved. Please try the /auth call again.");			
		}

		// Returns the cookie value if it exists.
		function getCookie(cname) {
			var name = cname + "=";
			var ca = document.cookie.split(';');
			for(var i = 0; i < ca.length; i++) {
				var c = ca[i].trim();
				if (c.indexOf(name)==0) return c.substring(name.length, c.length);
			}
			return "";
		}

		// Checks if cookie exists and auto-fills all Authorization fields.
		function checkCookie() {
			var sessionId = getCookie("sessionId");
			if (sessionId != "") {
				$(document).find('input.parameter.required[name="Authorization"]').val(sessionId);
			}
		}
	
		// Creates a cookie which expires in 24 hours.
		var createCookie = function(name, value, days) {
			var expires;
			if (days) {
				var date = new Date();
				date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
				expires = "; expires=" + date.toGMTString();
			} else {
				expires = "";
			}
			document.cookie = name + "=" + value + expires + "; path=/";
		}

		// Creates a cookie and auto-fills all Authorization fields.
		function saveSession(sessionValue) {
			var cookieName = "sessionId";
			var sessionId = sessionValue;
			createCookie(cookieName, sessionId, 1);
			checkCookie();
		}
					
	</script>


</body>
</html>